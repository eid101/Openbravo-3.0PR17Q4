<?xml version="1.0"?>
  <database name="VIEW M_PRODUCT_WAREHOUSE_QTYS_V">
    <view name="M_PRODUCT_WAREHOUSE_QTYS_V"><![CDATA[SELECT s.m_product_id, s.m_warehouse_id, sum(s.qtyonhand) AS qtyonhand, sum(s.qtyordered) AS qtyordered, sum(s.qtyreserved) AS qtyreserved
FROM (SELECT sd.m_product_id, l.m_warehouse_id, sd.qtyonhand, 0 AS qtyordered, 0 AS qtyreserved
FROM m_storage_detail sd
JOIN m_locator l ON sd.m_locator_id = l.m_locator_id
UNION 
SELECT sp.m_product_id, sp.m_warehouse_id, 0 AS qtyonhand, sp.qtyordered, sp.qtyreserved
FROM m_storage_pending sp) s
GROUP BY s.m_product_id, s.m_warehouse_id]]></view>
  </database>
