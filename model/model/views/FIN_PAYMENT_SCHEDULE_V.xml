<?xml version="1.0"?>
  <database name="VIEW FIN_PAYMENT_SCHEDULE_V">
    <view name="FIN_PAYMENT_SCHEDULE_V"><![CDATA[SELECT ps.fin_payment_schedule_id AS fin_payment_schedule_v_id, ps.ad_client_id, ps.ad_org_id, ps.isactive, ps.created, ps.createdby, ps.updated, ps.updatedby, ps.c_invoice_id, ps.duedate, ps.fin_paymentmethod_id, ps.amount AS expected, ps.paidamt AS received, ps.outstandingamt AS outstanding, ps.c_currency_id, ( SELECT max(p.paymentdate) AS max
           FROM fin_payment p
      LEFT JOIN fin_payment_detail pd ON pd.fin_payment_id = p.fin_payment_id
     WHERE pd.fin_payment_schedule_id = ps.fin_payment_schedule_id) AS lastpayment, ( SELECT count(*) AS count
           FROM fin_payment_detail pd
          WHERE pd.fin_payment_schedule_id = ps.fin_payment_schedule_id) AS numberofpayments
   FROM fin_payment_schedule ps]]></view>
  </database>
